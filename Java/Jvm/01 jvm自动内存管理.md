# Jvm01自动内存管理

[TOC]

## 一、类的初始化



## 二、内存分配与回收策略

1. 对象在Eden区生成。在新生代中S0和S1区进行流转，每当垃圾回收器进行一次，会清除Eden和S0（下次就是Eden和S1），年龄+1。一般不配置在15岁时进入老年代。年轻代一般包含Eden和S区。
2. 大对象直接进入老年代。
3. 同年龄对象大小总和超过Survivor空间的一半，这些对象通过分配担保直接进入老年代。
4. 空间分配担保当发生Minor GC时，会先去判断老年代的最大连续空间是否大于新生代的所有对象总空间。
   1. 如果大于就会去查看- XX：HandlePromotionFailure参数是否允许担保失败（不允许直接进行Full GC）。
   2. 如果允许担保失败，判断老年代最大连续空间是否大于历次晋升老年代的大小
   3. 如果大于，进行一次Minor GC否则进行一次Full GC。



## 三、虚拟机执行子系统

### 1.class文件解析

class是一个以8个字节为基础单位的二进制流。

前四个字节为魔数，定死为0xCAFEBABE，用来标识为java文件。

第五和第六字节标识版本号